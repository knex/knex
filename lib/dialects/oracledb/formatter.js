'use strict';

var _lodash = require('lodash');

var inherits = require('inherits');
var Oracle_Formatter = require('../oracle/formatter');
var BlobHelper = require('./utils').BlobHelper;

function Oracledb_Formatter(client) {
  Oracle_Formatter.call(this, client);
}
inherits(Oracledb_Formatter, Oracle_Formatter);

_lodash.assign(Oracledb_Formatter.prototype, {

  // Checks whether a value is a function... if it is, we compile it
  // otherwise we check whether it's a raw
  parameter: function parameter(value) {
    if (typeof value === 'function') {
      return this.outputQuery(this.compileCallback(value), true);
    } else if (value instanceof BlobHelper) {
      return 'EMPTY_BLOB()';
    }
    return this.unwrapRaw(value, true) || '?';
  }

});

module.exports = Oracledb_Formatter;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9kaWFsZWN0cy9vcmFjbGVkYi9mb3JtYXR0ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7c0JBSXFCLFFBQVE7O0FBSjdCLElBQUksUUFBUSxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNuQyxJQUFJLGdCQUFnQixHQUFHLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0FBQ3RELElBQUksVUFBVSxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxVQUFVLENBQUM7O0FBSS9DLFNBQVMsa0JBQWtCLENBQUMsTUFBTSxFQUFFO0FBQ2xDLGtCQUFnQixDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7Q0FDckM7QUFDRCxRQUFRLENBQUMsa0JBQWtCLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQzs7QUFFL0MsZUFBTyxrQkFBa0IsQ0FBQyxTQUFTLEVBQUU7Ozs7QUFJbkMsV0FBUyxFQUFFLFNBQVMsU0FBUyxDQUFDLEtBQUssRUFBRTtBQUNuQyxRQUFJLE9BQU8sS0FBSyxLQUFLLFVBQVUsRUFBRTtBQUMvQixhQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztLQUM1RCxNQUFNLElBQUksS0FBSyxZQUFZLFVBQVUsRUFBRTtBQUNwQyxhQUFPLGNBQWMsQ0FBQztLQUN6QjtBQUNELFdBQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDO0dBQzNDOztDQUVGLENBQUMsQ0FBQzs7QUFFSCxNQUFNLENBQUMsT0FBTyxHQUFHLGtCQUFrQixDQUFDIiwiZmlsZSI6ImZvcm1hdHRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG52YXIgT3JhY2xlX0Zvcm1hdHRlciA9IHJlcXVpcmUoJy4uL29yYWNsZS9mb3JtYXR0ZXInKTtcbnZhciBCbG9iSGVscGVyID0gcmVxdWlyZSgnLi91dGlscycpLkJsb2JIZWxwZXI7XG5cbmltcG9ydCB7YXNzaWdufSBmcm9tICdsb2Rhc2gnO1xuXG5mdW5jdGlvbiBPcmFjbGVkYl9Gb3JtYXR0ZXIoY2xpZW50KSB7XG4gIE9yYWNsZV9Gb3JtYXR0ZXIuY2FsbCh0aGlzLCBjbGllbnQpO1xufVxuaW5oZXJpdHMoT3JhY2xlZGJfRm9ybWF0dGVyLCBPcmFjbGVfRm9ybWF0dGVyKTtcblxuYXNzaWduKE9yYWNsZWRiX0Zvcm1hdHRlci5wcm90b3R5cGUsIHtcbiAgXG4gIC8vIENoZWNrcyB3aGV0aGVyIGEgdmFsdWUgaXMgYSBmdW5jdGlvbi4uLiBpZiBpdCBpcywgd2UgY29tcGlsZSBpdFxuICAvLyBvdGhlcndpc2Ugd2UgY2hlY2sgd2hldGhlciBpdCdzIGEgcmF3XG4gIHBhcmFtZXRlcjogZnVuY3Rpb24gcGFyYW1ldGVyKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIHRoaXMub3V0cHV0UXVlcnkodGhpcy5jb21waWxlQ2FsbGJhY2sodmFsdWUpLCB0cnVlKTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgQmxvYkhlbHBlcikge1xuICAgICAgICByZXR1cm4gJ0VNUFRZX0JMT0IoKSc7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnVud3JhcFJhdyh2YWx1ZSwgdHJ1ZSkgfHwgJz8nO1xuICB9XG5cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE9yYWNsZWRiX0Zvcm1hdHRlcjtcbiJdfQ==